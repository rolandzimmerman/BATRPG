/// @function scr_player_handle_invulnerability()
/// @description Manages player invulnerability timer and visual flashing.
/// Called from obj_player's Step Event.

if (self.invulnerable_timer > 0) {
    self.invulnerable_timer -= 1;
    self.flash_cycle_timer -= 1;

    if (self.flash_cycle_timer <= 0) {
        self.flash_cycle_timer = self.flash_interval;
        self.is_flashing_visible = !self.is_flashing_visible;
    }

    if (self.invulnerable_timer == 0) {
        self.is_flashing_visible = true; // Ensure fully visible when invulnerability ends
    }
} else {
    if (!self.is_flashing_visible) { // If left in a non-visible state
        self.is_flashing_visible = true;
    }
}